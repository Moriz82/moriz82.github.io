<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="RowdyHacks X project: Melody Match uses live heart-rate telemetry, a Python recommendation backend, and a Swift iOS app to select calming music." />
  <title>Melody Match: Swift Client + Python Server | Will DeDominico</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>
<body>
  <div class="background-noise" aria-hidden="true"></div>
  <header class="site-header">
    <div class="logo-lockup">
      <div class="logo-mark" aria-hidden="true">ðŸ’¾</div>
      <a href="../index.html#home" class="logo-type">Will<span>DeDominico</span></a>
    </div>
    <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav">
      <span class="sr-only">Toggle navigation</span>
      <span></span>
      <span></span>
    </button>
    <nav id="site-nav" class="site-nav" aria-expanded="false">
      <a href="../index.html#home">Home</a>
      <a href="../index.html#experience">Experience</a>
      <a href="../index.html#projects" class="is-active">Projects</a>
      <a href="../index.html#writeups">Writeups</a>
      <a href="../index.html#github">GitHub</a>
      <a href="../index.html#ctf">CTFs</a>
      <a href="../index.html#htb">HTB</a>
      <a href="../index.html#clubs">Clubs</a>
      <a href="../index.html#education">Education</a>
    </nav>
  </header>

  <main>
    <article class="section blog-layout post-content" aria-labelledby="post-title">
      <header>
        <h1 id="post-title">Melody Match: Swift Client + Python Server</h1>
        <div class="post-meta">
          <time datetime="2024-12-03">December 3, 2024</time>
          <span>7 minute read</span>
          <div class="post-tags" aria-label="Topics">
            <span class="post-tag">Swift</span>
            <span class="post-tag">Python</span>
            <span class="post-tag">ESP8266</span>
            <span class="post-tag">Hackathon</span>
          </div>
        </div>
      </header>

      <figure class="post-hero">
        <img src="../assets/img/melody.jpg" alt="Person testing a wearable device and companion mobile app" />
        <figcaption>Built at RowdyHacks X, Melody Match pairs sensor data with a Swift client and Python backend to recommend calming tracks.</figcaption>
      </figure>

      <div class="post-body">
        <p>Melody Match started as a RowdyHacks X build focused on stress and anxiety support through music. The prototype uses live heart-rate input, maps that telemetry to genre selection, and delivers playback through a mobile app workflow.</p>

        <h2>RowdyHacks X Context</h2>
        <p>During the event, the team treated Melody Match as a full hackathon pipeline: sensor capture, model-backed recommendation, and mobile playback loop. The project was submitted on Devpost as part of the RowdyHacks X challenge and served as the baseline for the current repo split.</p>

        <div class="content-card">
          <h3>How it was used at the hackathon</h3>
          <ul>
            <li>Collected live heart-rate data from an IR sensor + microcontroller setup.</li>
            <li>Sent telemetry to a Python service that searched genre candidates for lower BPM outcomes.</li>
            <li>Returned song IDs/metadata to the iOS app for playback and quick iteration during demos.</li>
            <li>Validated a complete sensor-to-recommendation-to-player loop under hackathon time constraints.</li>
          </ul>
        </div>

        <h2>Project Repositories</h2>
        <div class="content-card">
          <h3>Codebase Split</h3>
          <ul>
            <li><a href="https://github.com/Moriz82/MelodyMatchServer" target="_blank" rel="noopener">Moriz82/MelodyMatchServer</a> - Python recommendation and server loop.</li>
            <li><a href="https://github.com/LOLROW/Melody-Match" target="_blank" rel="noopener">LOLROW/Melody-Match</a> - Swift iOS app for song control and playback.</li>
          </ul>
        </div>

        <h2>Data Flow</h2>
        <p>The app and server both communicate with the ESP8266 host at <code>192.168.4.1</code>. Sensor values are read from <code>/viewserial</code>, song selections are sent to <code>/serverdata</code>, and client actions are posted to <code>/clientdata</code>.</p>

        <pre><code class="language-python">ESP8266URL = "http://192.168.4.1/"

def fetch_view_serial():
    response = requests.get(f"{ESP8266URL}/viewserial")
    response.raise_for_status()
    return response.json()

def send_server_data(song_id):
    payload = {"id": song_id}
    requests.post(f"{ESP8266URL}/serverdata", json=payload)</code></pre>

        <h2>iOS Client Loop</h2>
        <p>The Swift client requests a new song, polls the selected ID, then updates labels and playback state in the UI.</p>

        <pre><code class="language-swift">public static func requestNextSong() async -> Bool {
    let esp8266URL = "http://192.168.4.1/clientdata"
    let jsonPayload: [String: Any] = ["code": 14]
    ...
}

if let id = await WebServerQuerier.getSongID() as? (Int?, String?, Double?) {
    songIndex = id.0!
    self.genreLabel.text = "Genre: \(id.1!)"
    self.confidenceLevelLabel.text = "BPM: \(Int(ceil(id.2!)))"
    playAudio(songID: songIndex)
}</code></pre>

        <div class="callout callout--info" data-label="Current state">
          <p>The current implementation is a local-network prototype focused on rapid iteration across sensor input, model output, and iOS playback behavior.</p>
        </div>

        <h2>Next Iteration</h2>
        <p>Next updates are documenting setup in both repos, hardening the app-server contract, and cleaning the recommendation loop for repeatable testing.</p>

        <div class="callout callout--info" data-label="Submission">
          <p>This project was originally submitted as Melody Match on Devpost for RowdyHacks X, then expanded into separate server/client repositories for maintainability.</p>
        </div>
      </div>

      <footer class="post-footer">
        <p>Melody Match was built for RowdyHacks X and is now maintained as split Python/Swift codebases.</p>
        <div class="hero-actions">
          <a class="button primary" href="https://devpost.com/software/melody-match-roplm6" target="_blank" rel="noopener">RowdyHacks Devpost</a>
          <a class="button primary" href="https://github.com/Moriz82/MelodyMatchServer" target="_blank" rel="noopener">Server Repo</a>
          <a class="button primary" href="https://github.com/LOLROW/Melody-Match" target="_blank" rel="noopener">iOS Repo</a>
          <a class="button ghost" href="../index.html#projects">Back to Projects</a>
        </div>
      </footer>
    </article>
  </main>

  <footer class="site-footer">
    <p>Â© <span id="copyright-year"></span> Will DeDominico Â· Field-tested from San Antonio, TX.</p>
  </footer>

  <script src="../assets/js/main.js"></script>
</body>
</html>
